generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Click {
  id        Int      @id @default(autoincrement())
  key       String
  type      String
  count     Int      @default(1)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([type, key])
  @@map("clicks")
}



enum Category {
  ESTUDO
  PESSOAL
  ESTAGIO
  PESQUISA
}

enum Emotion {
  ALEGRIA
  CALMA
  ANSIEDADE
  REFLEXAO
  MOTIVACAO
  TRISTEZA
}

model User {
  id                String                @id @default(cuid())
  username          String
  email             String                @unique
  password          String
  createdAt         DateTime              @default(now())
  updatedAt         DateTime              @updatedAt
  refreshToken      String?

  passwordResetTokens PasswordResetToken[]
  reflections         Reflection[]          // Relacionamento 1:N com Reflex√µes
}

model PasswordResetToken {
  id         String   @id @default(cuid())
  token      String   @unique
  createdAt  DateTime @default(now())
  expiresAt  DateTime

  userId     String
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Reflection {
  id          String     @id @default(cuid())
  title       String
  category    Category
  emotion     Emotion
  content     String
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  userId      String
  user        User       @relation(fields: [userId], references: [id], onDelete: Cascade)
}

